
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>New Features: &#8212; BlueCats Docs 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>This describes the resources for the Loop API. If you have any problems
or requests contact <a class="reference external" href="mailto:support&#37;&#52;&#48;bluecats&#46;com">support<span>&#64;</span>bluecats<span>&#46;</span>com</a>.</p>
<div class="section" id="new-features">
<h1>New Features:<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Schema field descriptions - Basically a list of all the keys that
could be in a schema object and what they mean.</li>
<li>Search now supports IN for where clauses. Example Below:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;where&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;IN&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;0a6afd273021c150d4d758613a70c6b3&quot;</span><span class="p">,</span>
          <span class="s2">&quot;28e92020a3cc0939bf597a97dce99cce&quot;</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="table-of-contents">
<h1>Table of Contents:<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="loop-api-0.3.2#introduction">Introduction</a></li>
<li><a class="reference external" href="loop-api-0.3.2#connecting-to-the-api">Connecting to the API</a></li>
<li><strong>Starting with Loop API</strong><ul>
<li><a class="reference external" href="loop-api-0.3.2#login">Login</a></li>
<li><a class="reference external" href="loop-api-0.3.2#schema-query">Schema Query</a><ul>
<li><a class="reference external" href="loop-api-0.3.2#optional-query-params">Optional Query
Params</a></li>
<li><a class="reference external" href="loop-api-0.3.2#data-types">Data Types</a></li>
<li><a class="reference external" href="loop-api-0.3.2#schema-field-descriptions">Schema Field
Descriptions</a><ul>
<li><a class="reference external" href="loop-api-0.3.2#key-field-descriptions">Key Field
Descriptions</a></li>
<li><a class="reference external" href="loop-api-0.3.2#ui-field-descriptions">UI Field
Descriptions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Objects</strong><ul>
<li><a class="reference external" href="loop-api-0.3.2#create-objects">Create Objects</a></li>
<li><a class="reference external" href="loop-api-0.3.2#edit-objects">Edit Objects</a></li>
<li><a class="reference external" href="loop-api-0.3.2#delete-objects">Delete Objects</a></li>
<li><strong>Object Links</strong><ul>
<li><a class="reference external" href="loop-api-0.3.2#create-object-links">Create Object Links</a></li>
<li><a class="reference external" href="loop-api-0.3.2#edit-object-links">Edit Object Links</a></li>
<li><a class="reference external" href="loop-api-0.3.2#delete-object-links">Delete Object Links</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Events</strong><ul>
<li><a class="reference external" href="loop-api-0.3.2#event-query-params">Event Query Params</a><ul>
<li><a class="reference external" href="loop-api-0.3.2#event-identifiers-examples">Event Identifiers
Examples</a></li>
</ul>
</li>
<li><a class="reference external" href="loop-api-0.3.2#posting-events">Posting Events</a><ul>
<li><a class="reference external" href="loop-api-0.3.2#event-body">Event Body</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Search</strong><ul>
<li><a class="reference external" href="loop-api-0.3.2#search-endpoint">Search Endpoint</a></li>
<li><a class="reference external" href="loop-api-0.3.2#post-search">Post Search</a></li>
<li><a class="reference external" href="loop-api-0.3.2#search-body">Search Body</a></li>
<li><a class="reference external" href="loop-api-0.3.2#search-filters-where">Search Filters</a><ul>
<li><a class="reference external" href="loop-api-0.3.2#clause-dictionary">Clause Dictionary</a></li>
<li><a class="reference external" href="loop-api-0.3.2#comparison-operation-available-for-types">Comparison Operation Available for
Types</a></li>
<li><a class="reference external" href="loop-api-0.3.2#query-list">Query List</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The API is the interface between the customers and Loop. Our API is
based off of <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">RESTful
API</a>
calls.</p>
<p>The Loop API allows you to:</p>
<ul class="simple">
<li>Create or update a single or multiple (batch) Groups or Objects</li>
<li>Change the password of the Group</li>
<li>Delete an Object</li>
<li>Claim or unclaim a single or multiple (batch) Objects by the Owner</li>
<li>Send batch Events</li>
<li>Search and perform analytics on Groups, Objects, and Events</li>
</ul>
</div>
<div class="section" id="connecting-to-the-api">
<h1>Connecting to the API<a class="headerlink" href="#connecting-to-the-api" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Environment</th>
<th class="head">Connectivity</th>
<th class="head">PORT</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>Labs</em></td>
<td>URL:
<a class="reference external" href="https://bcstage.api.l">https://bcstage.api.l</a>
oop.bluecats.com/</td>
<td>443 (default https
port)</td>
</tr>
<tr class="row-odd"><td><em>Production</em></td>
<td>URL: {base_uri}</td>
<td>443 (default https
port)</td>
</tr>
</tbody>
</table>
<div class="section" id="api-endpoints">
<h2>API Endpoints<a class="headerlink" href="#api-endpoints" title="Permalink to this headline">¶</a></h2>
<p>This section contains outlines for API Endpoints and JSON structures
with examples using <a class="reference external" href="https://github.com/curl/curl">cURL</a>.</p>
</div>
</div>
<div class="section" id="login">
<h1>Login<a class="headerlink" href="#login" title="Permalink to this headline">¶</a></h1>
<p>Login credentials are returned after a POST request with your email and
password in the body as JSON for user login. <em>Basic Authorization
Credentials</em> is returned after a POST request for user login. Adding the
<em>Basic Authorization Credentials</em> to your header allows you to make
requests POST/GET groups.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>POST</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Content-Type: application/json, X-API-HEADER: 1</td>
</tr>
<tr class="row-even"><td><em>path</em></td>
<td>{base_uri}/login</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>{ “email”: {email}, “password”: {password} }</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X POST --data "@login.json" '{base_url}/login'
    </code></pre></details>  <details>

Response<pre><code>
    {
        "auth": "Basic {Authorization Token}",
        "groupID": {groupID},
        "email": "{email}",
        "firstName": "{firstName}",
        "lastName": "{lastName}"
    }
    </code></pre></details></div>
<div class="section" id="schema-query">
<h1>Schema Query<a class="headerlink" href="#schema-query" title="Permalink to this headline">¶</a></h1>
<p><em>Schema</em> replaces the object-types endpoint. Performing a GET request on
<em>Schema</em> is useful to determine which objects are available to which
groups and which you can query. The group ID in the objectTypes shows
what group created and has ownership of the objectType. Anyone
underneath that group can create objects. When creating objects, check
which object keys are required and what types they are when you want to
create objects.</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>GET</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json,
X-API-HEADER: 1</td>
</tr>
<tr class="row-even"><td><em>path</em></td>
<td>{base_uri}/schema</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="18%" />
<col width="17%" />
<col width="23%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Key</strong></th>
<th class="head"><strong>Value</strong></th>
<th class="head">Required</th>
<th class="head">Explanation</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>incUIAttr</td>
<td><em>bool</em></td>
<td>No</td>
<td>Exposes
hidden UI
Attributes
within
objectTypes</td>
<td>incUIAtt
r=True</td>
</tr>
<tr class="row-odd"><td>groupID</td>
<td><em>string</em></td>
<td>No</td>
<td>String
filters down
objectTypes
based on
group access</td>
<td>groupID=
{groupID
}</td>
</tr>
</tbody>
</table>
<p>When you query the <em>Schema</em> endpoint, you can display types and key
information for the resources for users, groups, objects, objectTypes.
Everything stored in the database are these six data types.</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="41%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>string</em></td>
<td>length of string field
that defaults to size 100</td>
<td>“firstName”</td>
</tr>
<tr class="row-odd"><td><em>datetime</em></td>
<td>ISO combined date in time
for UTC format</td>
<td>2017-10-31T18:
44:38.129120Z</td>
</tr>
<tr class="row-even"><td><em>decimal</em></td>
<td>9 digits on each side of
the decimal point, if
bigger than it will be
truncated</td>
<td>34.2338</td>
</tr>
<tr class="row-odd"><td><em>int</em></td>
<td>32-bits</td>
<td>56</td>
</tr>
<tr class="row-even"><td><em>json</em></td>
<td>application/json format</td>
<td>{“email”:{emai
l},
“password”:{pa
ssword}}</td>
</tr>
<tr class="row-odd"><td><em>bool</em></td>
<td>Only accepts True or False</td>
<td>True</td>
</tr>
</tbody>
</table>
<p>For each object type, it has a list of keys. Each key has a type, field,
and attributes. The keys have attributes like being if it is required,
if the type is editable, or if it has a linked to another object.</p>
<div class="code ruby highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;groupID&quot;</span><span class="p">,</span>
    <span class="s2">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Group ID&quot;</span><span class="p">,</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
    <span class="s2">&quot;editable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;link&quot;</span><span class="p">:</span> <span class="s2">&quot;groups&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="29%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Schema Field Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td><em>string</em></td>
<td>unique name of
object type</td>
</tr>
<tr class="row-odd"><td>displayName</td>
<td><em>string</em></td>
<td>non-unique name
for use in
displays</td>
</tr>
<tr class="row-even"><td>class</td>
<td><em>Thing</em> or <em>Place</em></td>
<td>class of object
type</td>
</tr>
<tr class="row-odd"><td>groupID</td>
<td><em>string</em></td>
<td>the id of the
group this object
type is defined
for</td>
</tr>
<tr class="row-even"><td>keys</td>
<td><em>list</em></td>
<td>list of object
keys and their
parameters <em>see
key table below</em></td>
</tr>
<tr class="row-odd"><td>uiAttr</td>
<td><em>dictionary</em></td>
<td>Dictionary of
object keys and
their ui
parameters order
of keys in the
dictionary
represents the
order keys should
be displayed in a
list view <em>see
uiAttr Key table
below</em></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="29%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key Field Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td><em>string</em></td>
<td>Unique name of the
key</td>
</tr>
<tr class="row-odd"><td>displayName</td>
<td><em>string</em></td>
<td>Non-unique name
for use in
displays</td>
</tr>
<tr class="row-even"><td>required</td>
<td><em>bool</em></td>
<td>Whether the key
value is required
on creation or not</td>
</tr>
<tr class="row-odd"><td>type</td>
<td><em>string</em>, <em>json</em>,
<em>datetime</em>, <em>int</em>,
<em>decimal</em>, or
<em>bool</em></td>
<td>Type of the key’s
value</td>
</tr>
<tr class="row-even"><td>length</td>
<td><em>int</em></td>
<td>Length of value
(if type is
string)</td>
</tr>
<tr class="row-odd"><td>editable</td>
<td><em>bool</em></td>
<td>Whether the key
value is able to
be edited</td>
</tr>
<tr class="row-even"><td>link</td>
<td><em>string</em></td>
<td>If present, this
represents that
the key value is a
reference to
another object.
The value of link
is the object type
name that this key
is a reference to</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="29%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">uiAttr Key Field Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>hidden</td>
<td><em>bool</em></td>
<td>whether the key
should be hidden
or not in the list
view</td>
</tr>
<tr class="row-odd"><td>input</td>
<td><em>string</em></td>
<td>The input type
that should be
used for this key
in forms. If input
is not present,
then value is
assumed to be
‘textbox’. If the
value is ‘special’
then the ui should
already have
special code in
place for it.</td>
</tr>
<tr class="row-even"><td>detailsLink</td>
<td><em>dictionary</em></td>
<td>describes a URL to
provide for more
details pertaining
to this key
<em>detailsLink
dictionary example
below</em></td>
</tr>
</tbody>
</table>
<p><strong>detailsLink dictionary example below:</strong></p>
<div class="code ruby highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/things&quot;</span><span class="p">,</span> <span class="s2">&quot;objecttype&quot;</span><span class="p">,</span> <span class="s2">&quot;objectid&quot;</span><span class="p">],</span>
    <span class="s2">&quot;queryParams&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;showtab&quot;</span><span class="p">:</span> <span class="s2">&quot;logs&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In our example below, we will query the <em>Schema</em> endpoint. There are
ellipses to shorten the very long schema response.</p>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X GET '{base_url}/schema?incUIAttr=True'
    </code></pre></details>  <details>

Response<pre><code>
    {
        "objectLinks": {
            "keys": [
                {
                    "name": "eventIDType",
                    "displayName": "Event ID Type",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "eventID",
                    "displayName": "Event ID",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "objectType",
                    "displayName": "Object Type",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "objectID",
                    "displayName": "Object ID",
                    "type": "string",
                    "length": 32
                },
                {
                    "name": "groupID",
                    "displayName": "Group ID",
                    "type": "string",
                    "length": 32,
                    "link": "groups"
                }
            ]
        },
        "groups": {
            "keys": [
                {
                    "name": "id",
                    "displayName": "ID",
                    "type": "string",
                    "length": 32
                },
                {
                    "name": "type",
                    "displayName": "Type",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "name",
                    "displayName": "Name",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "parentID",
                    "displayName": "Parent Group",
                    "type": "string",
                    "length": 32,
                    "link": "groups"
                },
                {
                    "name": "dmanTeamID",
                    "displayName": "BlueCats Team ID",
                    "type": "string",
                    "length": 40
                },
                {
                    "name": "abbreviation",
                    "displayName": "Abbreviation",
                    "type": "string",
                    "length": 100
                },

                 . . .

                }
            ]
        },

        "users": {
            "keys": [
                {
                    "name": "email",
                    "displayName": "Email",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "firstName",
                    "displayName": "First Name",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "lastName",
                    "displayName": "Last Name",
                    "type": "string",
                    "length": 100
                },
                {
                    "name": "groupID",
                    "displayName": "Group",
                    "type": "string",
                    "length": 100,
                    "link": "groups"
                }
            ]
        },
        "objectTypes": [
            "bcdEquipment",
            "bcdParcel",
            "bcdPerson",
            "bcdTableFlag",
            "bcdVehicle",
            "Device",
            "Place"
        ],
        "objects": {
            "bcdEquipment": {
                "name": "bcdEquipment",
                "displayName": "Equipment",
                "class": "Thing",
                "keys": [
                    {
                        "name": "id",
                        "displayName": "ID",
                        "required": false,
                        "type": "string",
                        "length": 32,
                        "editable": false
                    },
                    {
                        "name": "groupID",
                        "displayName": "Group ID",
                        "required": true,
                        "type": "string",
                        "length": 32,
                        "editable": true,
                        "link": "groups"
                    },

                     . . .
                    {
                        "name": "serialNumber",
                        "displayName": "Serial Number",
                        "required": false,
                        "type": "string",
                        "editable": true,
                        "length": 100
                    },
                    {
                        "name": "placeChangedAt",
                        "displayName": "Changed At",
                        "required": false,
                        "type": "datetime",
                        "editable": false
                    },
                    {
                        "name": "long",
                        "displayName": "Longitude",
                        "required": false,
                        "type": "decimal",
                        "editable": false
                    },
                    {
                        "name": "lat",
                        "displayName": "Latitude",
                        "required": false,
                        "type": "decimal",
                        "editable": false
                    },

                ],
                "groupID": "a3cec63e2aa927c93567abd968677314"
            },
               . . .

        "logs": {

                "x_triplog": {
                "name": "x_triplog",
                "displayName": "Trip Logs",
                "groupID": "979a3ef98cfb4ba37fd4cae28fea597",
                "keys": [
                    {
                        "name": "ts",
                        "displayName": "Timestamp",
                        "type": "datetime"
                    },
                    {
                        "name": "objectid",
                        "displayName": "Object ID",
                        "type": "string",
                        "length": 32
                    },

                    . . .
            "logTypes": [
            "x_battlog",
            "x_intransitlog",
            "x_placelog",
            "x_positionlog",
            "x_templog",
            "x_triplog"
        ]
    }
    </code></pre></details><div class="section" id="objects">
<h2>Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h2>
<p>Are what allow you to give what you want to track meaningful data and
link it to Loop.</p>
</div>
</div>
<div class="section" id="create-objects">
<h1>Create Objects<a class="headerlink" href="#create-objects" title="Permalink to this headline">¶</a></h1>
<p>In order to Create Objects, you will POST to the <em>Objects</em> endpoint. To
create objects, you will POST body JSON with:</p>
<ul class="simple">
<li>objectType in body</li>
<li>groupID</li>
<li>required keys</li>
<li>and all of the optional keys.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>POST</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json, X-API-HEADER:
1</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/objects</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>{ “groupID”: {groupID}, “objectType”:
{objectType}, “requiredKey”: {requiredValue},
“optionalKey”: {optionalValue} }</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -X POST --data "@object.json" 'https://bcstage.api.loop.bluecats.com/objects'
    </code></pre></details><p>Object create and edit response returns a json dictionary with
objectType and id.</p>
  <details>

Response<pre><code>
    "objectType": "Device",
    "id": "4b3890e4fb580c6e9443b6081d0a1628"
    </code></pre></details></div>
<div class="section" id="edit-objects">
<h1>Edit Objects<a class="headerlink" href="#edit-objects" title="Permalink to this headline">¶</a></h1>
<p>In order to Edit Objects, you will PATCH to the <em>Objects</em> endpoint. To
edit objects, you will PATCH body JSON with:</p>
<ul class="simple">
<li>objectID and object type in the body</li>
<li>any keys you want to change</li>
<li>You can change -&gt; groupID if it is in your groups</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>PATCH</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json, X-API-HEADER:
1</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/objects</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>{ “id”: {id}, “objectType”: {objectType},
“editableKey”: {editableValue} }</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -X PATCH --data "@object.json" '{base_url}/objects'
    </code></pre></details><p>Object create and edit response returns a json dictionary with
objectType and id.</p>
  <details>

Response<pre><code>
    "objectType": "Device",
    "id": "4b3890e4fb580c6e9443b6081d0a1628"
    </code></pre></details></div>
<div class="section" id="delete-objects">
<h1>Delete Objects<a class="headerlink" href="#delete-objects" title="Permalink to this headline">¶</a></h1>
<p>In order to delete Objects, you will DELETE to the <em>Objects</em> endpoint.
To edit objects, you will DELETE body JSON with:</p>
<ul class="simple">
<li>objectType</li>
<li>ID</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>DELETE</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic
{credentials}, Content-Type:
application/json</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/objects</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>{ “id”: {id}, “objectType”:
{objectType}}</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -X DELETE --data "@object.json" '{base_url}/objects'
    </code></pre></details>  <details>

Response<pre><code>
    "objectType": "Device",
    "id": "4b3890e4fb580c6e9443b6081d0a1628"
    </code></pre></details></div>
<div class="section" id="object-links">
<h1>Object Links<a class="headerlink" href="#object-links" title="Permalink to this headline">¶</a></h1>
<p>Object Links are what allow you to report events for a specific object
to the Loop API. Each object can have multiple object links or event
identifiers to report back to Loop. With object links, you can: - create
- edit - delete</p>
<p>Adds new object links, single or multiple, potentially for different
objects and types.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>POST</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json, X-API-HEADER:
1</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/objects/link</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>[[objectType, objectID, eventIDType, eventID],
[objectType2, objectID2, eventIDType2,
eventID2]]</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X POST --data "@objectslink.json" '{base_url}/objects/link'
    </code></pre></details>  <details>

Response<pre><code>
    "Success"
    </code></pre></details><p>Replaces object links on single object with PUT links.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>PUT</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json, X-API-HEADER:
1</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/objects/link</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>{objectType: val, objectID: val, links:
[[eventIDType, eventID], [eventIDType2,
eventID2]}</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X PUT --data "@objectslink.json" '{base_url}/objects/link'

    </code></pre></details>  <details>

Response<pre><code>
    "Success"
    </code></pre></details><p>Removes object links, single or multiple, potentially for different
objects and types</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>DELETE</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json, X-API-HEADER:
1</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/objects/link</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>[[objectType, objectID, eventIDType, eventID],
[objectType2, objectID2, eventIDType2,
eventID2]]</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X DELETE --data "@objectlink.json" '{base_url}/objects/link'

    </code></pre></details>  <details>

Response<pre><code>
    "Success"
    </code></pre></details><div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<div class="section" id="query-events">
<h1>Query Events<a class="headerlink" href="#query-events" title="Permalink to this headline">¶</a></h1>
<p>Login credentials are returned after a GET request for user login. Any
event type located here. Those event types will be saved. However, it
will not necessarily have state logic applied to it.</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>GET</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json,
X-API-HEADER: 1</td>
</tr>
<tr class="row-even"><td><em>path</em></td>
<td>{base_uri}/events</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="event-query-params">
<h1>Event Query Params<a class="headerlink" href="#event-query-params" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="22%" />
<col width="20%" />
<col width="20%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Key</strong></th>
<th class="head"><strong>Value</strong></th>
<th class="head">Required</th>
<th class="head">Explanation</th>
<th class="head">Examples</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>objectType</td>
<td><em>string</em></td>
<td>Yes</td>
<td>specifying
identifier
to query</td>
<td>objectTyp
e={object
Type}</td>
</tr>
<tr class="row-odd"><td>objectID</td>
<td><em>string</em></td>
<td>Yes</td>
<td>specifying
identifier
to query</td>
<td>objectID=
{objectID
}</td>
</tr>
<tr class="row-even"><td>eventType</td>
<td><em>string</em></td>
<td>No</td>
<td>[event
types]({{
‘documentat
ion/loop/bc
-loop-event
-types’</td>
<td><a href="#id1"><span class="problematic" id="id2">relative_</span></a>
url
}})</td>
</tr>
<tr class="row-odd"><td>lastKeyID</td>
<td><em>string</em></td>
<td>No</td>
<td>Starts from
the event
after
referenced.
(<em>Requires</em>
lastKeyTS)</td>
<td>“lastKeyI
D”:
“bcId#500
02D7D”,
“lastKeyT
S”:
“2017-11-
01T17:34:
59.801528
Z”</td>
</tr>
<tr class="row-even"><td>lastKeyTS</td>
<td><em>string</em></td>
<td>No</td>
<td>Starts from
the event
after
referenced.
(<em>Requires</em>
lastKeyID)</td>
<td>“lastKeyI
D”:
“bcId#500
02D7D”,
“lastKeyT
S”:
“2017-11-
01T17:34:
59.801528
Z”</td>
</tr>
<tr class="row-odd"><td>limit</td>
<td><em>int</em></td>
<td>No</td>
<td>Number of
objects
returned
(max 100)</td>
<td>count=34</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -X GET "{base_url}/events?"\
        "objectType=bcdPerson&"\
        "objectID=b5d3daebcad1bef1ff660d13ec80a1df"

    </code></pre></details>  <details>

Response<pre><code>
    {
        "events": [
            {
                "ts": "2018-01-17T00:00:00.000031Z",
                "eventID": "eddyUID#3EBC2C6462A6D9E7BF47000000000003",
                "objectType": "bcdPerson",
                "objectID": "b5d3daebcad1bef1ff660d13ec80a1df",
                "edgeMAC": "E4956E4CC2E0",
                "objectType_id_eventType": "bcdPerson_b5d3daebcad1bef1ff660d13ec80a1df_scanEvent",
                "groupID": "66679cbce97e147f3ef61122eb63a1a3",
                "objectType_id": "bcdPerson_b5d3daebcad1bef1ff660d13ec80a1df",
                "eventType": "scanEvent",
                "eventBody": {
                    "mac": "D42202000053",
                    "temp": "test_temp",
                    "eddyUID": "3EBC2C6462A6D9E7BF47000000000003"
                }
            }
        ],
        "count": 1,
        "lastKeyID": "bcdPerson_b5d3daebcad1bef1ff660d13ec80a1df",
        "lastKeyTS": "2018-01-17T00:00:00.000031Z"
    }
    </code></pre></details></div>
<div class="section" id="posting-events">
<h1>Posting Events<a class="headerlink" href="#posting-events" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>POST</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Content-Type: application/json, X-API-HEADER: 1</td>
</tr>
<tr class="row-even"><td><em>path</em></td>
<td>{base_uri}/events</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>{event body}</td>
</tr>
</tbody>
</table>
<p>In general for the Event Body, you will have a edgeMac identifier this
is where the Events are being posted from.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;edgeMAC&quot;</span><span class="p">:{</span><span class="n">identifier</span><span class="p">}</span>
</pre></div>
</div>
<p>If you have GPS values, you can have a location dictionary with key
value pairs for lat and long. Including values for Lat and long will
create a an Edge Location Event. For the locations lat and long, the
value can be empty “” or contain a {value}.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;loc&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;lat&quot;</span><span class="p">:</span>     <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="p">{</span><span class="n">value</span><span class="p">},</span>
    <span class="s2">&quot;long&quot;</span><span class="p">:</span>    <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="p">{</span><span class="n">value</span><span class="p">},</span>
 <span class="p">},</span>
</pre></div>
</div>
<p>Nested underneath will be an events list. <em>Time Stamp</em>, an <em>identifier</em>,
and <em>eventType</em> is required in each event.</p>
<ol class="arabic simple">
<li>Time stamp is required in this UTC ISO-format: DATE:TIME
(2017-07-20T18:42:34.129120Z).</li>
<li>Identifiers are required and can be delivered in two formats:<ul>
<li>The edge relay format for:<ul>
<li>iBeac</li>
<li>eddyUID</li>
<li>bcId</li>
<li>btAddr</li>
</ul>
</li>
<li>Identifier key value pair:<ul>
<li>identifier=ibeac#{ibeaconkeyinhex}</li>
<li>identifier=eddyUID#{eddystoneUID}</li>
<li>identifier=bcId#{bc custom identifier, normally serial number}</li>
<li>identifier=btAddr#{bluetooth address}</li>
<li>identifier=Whatever {though this does not mean it will be
processed by State Logic}</li>
</ul>
</li>
</ul>
</li>
<li>The final thing required for this eventType. There are many different
[event types]({{ ‘/documentation/loop/bc-loop-event-types’|
relative_url }}). There are other things that can be included in the
events. It will be saved but does not necessarily mean it will be
processed.</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="s2">&quot;events&quot;</span><span class="p">:[</span>
     <span class="p">{</span>
        <span class="s2">&quot;mac&quot;</span><span class="p">:</span><span class="s2">&quot;D42202000053&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="s2">&quot;2017-07-20T18:42:34.129120Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;event&quot;</span><span class="p">:</span><span class="s2">&quot;exZone&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exZone&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span>
        <span class="s2">&quot;iBeac&quot;</span><span class="p">:</span><span class="s2">&quot;E2C56DB5DFFB48D2B060D0F5A71096E000000000&quot;</span>
     <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here is a complete example that can be sent up as POST. There are many
different iterations of how you can POST Events. Save an event.json file
to POST.</p>
  <details>

Example (event.json)<pre><code>
    {
       "edgeMAC":"E4956E4CC2E0",
       "loc":{
          "lat":"",
          "long":"",
          "fixQual":0,
          "spd":"",
          "alt":""
       },
       "events":[
          {
             "mac":"D42202000053",
             "ts":"2017-07-20T18:42:34.129120Z",
             "event":"exZone",
             "exZone":"IN",
             "iBeac":"E2C56DB5DFFB48D2B060D0F5A71096E000000000"
          },
          {
             "mac":"D42202000053",
             "ts":"2017-07-20T18:42:34.205799Z",
             "event":"enZone",
             "enZone":"ME",
             "iBeac":"E2C56DB5DFFB48D2B060D0F5A71096E000000000"
          },
          {
             "mac":"98072D05F878",
             "ts":"2017-07-20T18:42:34.273086Z",
             "event":"enZone",
             "enZone":"ME"
          },
          {
             "mac":"A0E6F854F546",
             "ts":"2017-07-20T18:42:34.816404Z",
             "event":"enZone",
             "enZone":"ME"
          },
          {
             "mac":"44FB9726E7B1",
             "ts":"2017-07-20T18:42:35.437517Z",
             "event":"enZone",
             "enZone":"ME"
          },
          {
             "mac":"98072D068212",
             "ts":"2017-07-20T18:42:36.254939Z",
             "event":"enZone",
             "enZone":"ME"
          }
       ]
    }

    </code></pre></details>  <details>

Request<pre><code>

    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X POST --data "@event.json" '{base_url}/events'

    </code></pre></details>  <details>

Response<pre><code>
    "Success: 3 events reported"
    </code></pre></details><div class="section" id="search-endpoint">
<h2>Search Endpoint<a class="headerlink" href="#search-endpoint" title="Permalink to this headline">¶</a></h2>
<p>The search API for Loop can perform queries and analytics on users,
objects, and groups. Our API is based off the <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST
API</a>.</p>
<p>The following examples outlines for API Endpoints and JSON structures
with examples using <a class="reference external" href="https://github.com/curl/curl">cURL</a>.</p>
</div>
</div>
<div class="section" id="post-search">
<h1>POST search<a class="headerlink" href="#post-search" title="Permalink to this headline">¶</a></h1>
<p>A Search API request contains the following elements:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTPS Element</th>
<th class="head">Request Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>method</em></td>
<td>POST</td>
</tr>
<tr class="row-odd"><td><em>header</em></td>
<td>Authorization: Basic {credentials},
Content-Type: application/json, X-API-HEADER:
1</td>
</tr>
<tr class="row-even"><td><em>path</em> (req)</td>
<td>{base_uri}/search</td>
</tr>
<tr class="row-odd"><td><em>body</em></td>
<td>JSON of the search request</td>
</tr>
</tbody>
</table>
  <details>

Request<pre><code>
    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X POST --data "@search.json" '{base_url}/search'
    </code></pre></details></div>
<div class="section" id="search-body">
<h1>Search Body<a class="headerlink" href="#search-body" title="Permalink to this headline">¶</a></h1>
<p>The search topics send up a body of JSON. The first required key:value
pair is <em>from:resource</em>. One of the 3 following string types of resource
must be picked from as a resource:</p>
<ul class="simple">
<li>users</li>
<li>groups</li>
<li>object types</li>
<li>object links</li>
<li>log types</li>
</ul>
<p>If you were to query the <em>users</em> resource, you would format it as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>If you were to query the <em>groups</em> resource, you would format it as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;groups&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>If you were to query the <em>object</em> resource, then a valid objectType of
type is string is required in the base level of the JSON. For the rest
of our example, we are going to be querying for a car object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>The next required key is <em>select</em>, which is of the list type. Within the
select list, can either select for { ‘value’: ‘type’ } and/or { ‘count’:
‘all’} OR {‘count’: ‘groups’ }. Count returns the total number of the
object queried. We can query things the year, color, and count all car
objectTypes that you have ownership of. This example we will select by
year, color, and count all of the types.</p>
<p><em>count</em> (all or groups): can now have the value ‘all’ or ‘groups’. {
‘count’: ‘all’ } returns the total number of the object queried.
{‘count’: ‘groups’} will append a ‘count’ key to the returned objects
that has the count of that grouping.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span>
    <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;year&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;color&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;all&#39;</span> <span class="p">}</span>
    <span class="p">],</span>
</pre></div>
</div>
<ul class="simple">
<li><em>offset</em> (integer): defaults to 0 and is where to start indexing the
objects from</li>
<li><em>limit</em> (integer): defaults to 100 and can be between the values
0-1000</li>
<li><em>orderBy</em> (list of dictionaries): requires at at least one dictionary
and has the form of key:value with direction being either ascending
or descending: {‘value’: {key}, ‘direction’: asc/desc}</li>
<li><em>ssearch</em> (string): this allows you to search any string</li>
<li><em>groupBy</em> (list of strings): allows you to filter by 1 or more column
names.</li>
</ul>
<p>This query looks for how many batt logs we have per object using groupBy
objecttype and objectid and count <code class="docutils literal notranslate"><span class="pre">{&quot;count&quot;:</span> <span class="pre">&quot;groups&quot;}</span></code>.</p>
  <details>

groupBy Request<pre><code>

    {
        "from": "x_battlog",
        "select": [{"value": "objecttype"}, {"value": "objectid"}, {"count": "groups"}],
        "groupBy": ["objecttype", "objectid"]
    }

    </code></pre></details>  <details>

groupBy Response<pre><code>
    {
    "x_battlog": [
        {
            "objectid": "bfb402e6c1a3955a495cb6b7acbb2371",
            "objecttype": "bcdEquipment",
            "count": 2766
        },
        {
            "objectid": "e704b469467483a6380aa1f9b0d358b7",
            "objecttype": "bcdEquipment",
            "count": 2765
        }
      ]
   }

    </code></pre></details><p>To add to our car example, we will:</p>
<ul class="simple">
<li>offset the index by 5</li>
<li>limit the results to 50</li>
<li>orderBy:<ol class="arabic">
<li>the year by descending</li>
<li>color by ascending</li>
</ol>
</li>
<li>ssearch by ‘cool car’</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span>
    <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;year&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;color&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;all&#39;</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s1">&#39;orderBy&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="s1">&#39;desc&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;ssearch&#39;</span><span class="p">:</span> <span class="s1">&#39;cool car&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>Normally, a user can only see information about an resource
(i.e.&nbsp;object, place, etc) if they have ownership of it. The hierarchy
prevents users from seeing resources that are above them from a parent
group. Place Parent ID is a special key that allows a user to see the
place ID of a parent group ID when they normally would not.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;groups&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
              <span class="s2">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span>
              <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
              <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">32</span>
          <span class="p">},</span>
          <span class="p">{</span>
              <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;parentID&quot;</span><span class="p">,</span>
              <span class="s2">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Parent Group&quot;</span><span class="p">,</span>
              <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
              <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
              <span class="s2">&quot;link&quot;</span><span class="p">:</span> <span class="s2">&quot;groups&quot;</span>
          <span class="p">},</span>


          <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>


          <span class="p">{</span>
              <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;placeParentID&quot;</span><span class="p">,</span>
              <span class="s2">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Place Access Group&quot;</span><span class="p">,</span>
              <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
              <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
              <span class="s2">&quot;link&quot;</span><span class="p">:</span> <span class="s2">&quot;groups&quot;</span>
          <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="search-filters-where">
<h1>Search Filters: <em>where</em><a class="headerlink" href="#search-filters-where" title="Permalink to this headline">¶</a></h1>
<p><em>where</em> is a list that allows you to filter on your searches with a few
powerful concepts that need to be explained: clause dictionaries
(composed of comparison operations), query clause, and clause lists. The
bare minimum where filter is using a <em>clause dictionary</em>.</p>
<p>This is a form of a dictionary that allows <em>comparison operations</em> to be
performed on keys with some type of value. This takes the form of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;key_name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;comparison operation&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span> <span class="p">}}</span>
</pre></div>
</div>
<p>This is all the possible current comparison operations available.</p>
<table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="26%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Comparison Operation Name</th>
<th class="head">Explanation</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>EQ</td>
<td>filters if the
value is equal</td>
<td>{‘year’:
{‘EQ’:
2000 }}</td>
</tr>
<tr class="row-odd"><td>NEQ</td>
<td>filters if the
value is not
equal</td>
<td>{‘year’:
{‘NEQ’:
400 }}</td>
</tr>
<tr class="row-even"><td>GT</td>
<td>filters if the
value is greater
than</td>
<td>{‘age’:
{‘GT’: 25
}}</td>
</tr>
<tr class="row-odd"><td>GE</td>
<td>filters if the
value is greater
than or equal to</td>
<td>{‘age’:
{‘GE’: 25
}}</td>
</tr>
<tr class="row-even"><td>LT</td>
<td>filters if the
value is less
than</td>
<td>{‘age’:
{‘LT’: 25
}}</td>
</tr>
<tr class="row-odd"><td>IN</td>
<td>filters if any
the values in
the list are in
the search</td>
<td>{‘age’:
{‘IN’:
[25,30] }}</td>
</tr>
<tr class="row-even"><td>LE</td>
<td>filters if the
value is less
than or equal to</td>
<td>{‘age’:
{‘LE’: 25
}}</td>
</tr>
<tr class="row-odd"><td>HAS</td>
<td>filters if the
key has the
value (Requires
the string
‘value’)</td>
<td>{‘age’:
{‘HAS’:
‘value’ }}</td>
</tr>
<tr class="row-even"><td>HASNO</td>
<td>filters if the
key has the
value (Requires
the string
‘value’)</td>
<td>{‘age’:
{‘HASNO’:
‘value’ }}</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Types</th>
<th class="head">Comparison Operations Types Available</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>string</em></td>
<td>ALL</td>
</tr>
<tr class="row-odd"><td><em>dateTime</em></td>
<td>ALL</td>
</tr>
<tr class="row-even"><td><em>decimal</em></td>
<td>ALL</td>
</tr>
<tr class="row-odd"><td><em>int</em></td>
<td>ALL</td>
</tr>
<tr class="row-even"><td><em>bool</em></td>
<td>EQ, NEQ, HAS, HASNO</td>
</tr>
<tr class="row-odd"><td><em>json</em></td>
<td>HAS, HASNO</td>
</tr>
</tbody>
</table>
<p>A query clause is the use of AND or OR. A query list allows is a list
type that requires a query clause first and then allows clause
dictionaries and/or query lists to be nested. Here is an example of a
basic query list with a two clause dictionaries.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">where</span> <span class="p">[</span>
    <span class="p">{</span><span class="n">clause</span> <span class="n">dictionary</span> <span class="mi">1</span><span class="p">},</span>
    <span class="p">{</span><span class="n">clause</span> <span class="n">dictionary</span> <span class="mi">2</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Here is an example of a basic query list with a two clause dictionaries
and a nested query list. This queries for when (clause 1 AND clause 2)
are true.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">where</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;or&quot;</span><span class="p">:</span>
            <span class="p">[</span>
                <span class="p">{</span><span class="n">clause</span> <span class="n">dictionary</span> <span class="mi">1</span><span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;and&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="p">{</span><span class="n">clause</span> <span class="n">dictionary</span> <span class="mi">2</span><span class="p">},</span>
                        <span class="p">{</span><span class="n">clause</span> <span class="n">dictionary</span> <span class="mi">3</span><span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Here is an example of a basic query list with a two clause dictionaries
and a nested query list. This queries for when (clause 1 OR (clause 2
AND clause 3)) are true.</p>
<p>This is a where filter with filtering a car by the colors: (green) OR
(red) OR (blue AND white). The final JSON body for our car example would
like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span>
    <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;year&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;color&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;all&#39;</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s1">&#39;orderBy&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="s1">&#39;desc&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;ssearch&#39;</span><span class="p">:</span> <span class="s1">&#39;cool car&#39;</span><span class="p">,</span>
    <span class="s1">&#39;where&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;or&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;EQ&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span> <span class="p">}</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;EQ&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">}</span> <span class="p">},</span>
                <span class="p">{</span><span class="s1">&#39;and&#39;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;EQ&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span> <span class="p">}</span> <span class="p">},</span>
                        <span class="p">{</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;EQ&#39;</span><span class="p">:</span> <span class="s1">&#39;white&#39;</span> <span class="p">}</span> <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For example, let’s say that you want to replace low batteries for your
equipment (i.e.&nbsp;bcdEquipment). You would want know the equipments:</p>
<ul class="simple">
<li>battery level</li>
<li>serial number</li>
<li>where that equipment was last seen</li>
</ul>
<p>You would search from bcdEquipment, select for SN battery life and
place. Then you would check if the equipment has a place AND if it has a
battery less then 50%.</p>
  <details>

Example File: search.json<pre><code>
    {
      "from": "bcdEquipment",
      "select": [
        {"count": "all" },
        {"value": "serialNumber"},
        {"value": "batterySoC"},
        {"value": "place"}

        ],
      "where":[
        {"and": [
                    {"place" : {"HAS": "value" }},
                    {"batterySoC": {"LT": 50}}
                ]
            }

      ]
    }
    </code></pre></details>  <details>

Request<pre><code>

    curl \
    -H "Authorization: Basic {Authorization Token}" \
    -H "Content-Type: application/json" \
    -H "X-API-HEADER: 1" \
    -X POST --data "@search.json" '{base_url}/search' >> bcdEquipment.json
    </code></pre></details>  <details>

Response<pre><code>
    {
        "count": 2,
        "bcdEquipment": [
            {
                "place": "ab18fb87bddf4f23a31b6bc9f9b29844",
                "batterySoC": 47,
                "serialNumber": "50000193"
            },
            {
                "place": "ab18fb87bddf4f23a31b6bc9f9b29844",
                "batterySoC": 49,
                "serialNumber": "5000083D"
            }
        ]
    }
    </code></pre></details></div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">New Features:</a></li>
<li><a class="reference internal" href="#table-of-contents">Table of Contents:</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#connecting-to-the-api">Connecting to the API</a><ul>
<li><a class="reference internal" href="#api-endpoints">API Endpoints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#login">Login</a></li>
<li><a class="reference internal" href="#schema-query">Schema Query</a><ul>
<li><a class="reference internal" href="#objects">Objects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-objects">Create Objects</a></li>
<li><a class="reference internal" href="#edit-objects">Edit Objects</a></li>
<li><a class="reference internal" href="#delete-objects">Delete Objects</a></li>
<li><a class="reference internal" href="#object-links">Object Links</a><ul>
<li><a class="reference internal" href="#events">Events</a></li>
</ul>
</li>
<li><a class="reference internal" href="#query-events">Query Events</a></li>
<li><a class="reference internal" href="#event-query-params">Event Query Params</a></li>
<li><a class="reference internal" href="#posting-events">Posting Events</a><ul>
<li><a class="reference internal" href="#search-endpoint">Search Endpoint</a></li>
</ul>
</li>
<li><a class="reference internal" href="#post-search">POST search</a></li>
<li><a class="reference internal" href="#search-body">Search Body</a></li>
<li><a class="reference internal" href="#search-filters-where">Search Filters: <em>where</em></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/loop/loop-versions/loop-api-0.3.2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Ernie Forzano.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/loop/loop-versions/loop-api-0.3.2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>